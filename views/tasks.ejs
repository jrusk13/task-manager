<%- include('partials/header', { pageTitle: 'Task List', user }) %>

<div class="container mt-4">
    <h1 class="text-primary">Tasks</h1>
    <div class="text-end mb-4">
        <% if (userType === 'admin') { %>
            <span class="badge bg-info text-dark">Admin</span>
        <% } %>
        <a href="/tasks/add" class="btn btn-primary">Add Task</a>
        <a href="/logout" class="btn btn-danger">Logout</a>
    </div>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Title</th>
                <th>Project</th>
                <th>Status</th>
                <th>Due Date</th>
                <th>Assigned To</th>
                <th>Author</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <% tasks.forEach(task => { %>
                <tr>
                    <td><%= task.title %></td>
                    <td><%= task.projectName %></td>
                    <td><%= task.status %></td>
                    <td><%= task.dueDate || 'No Due Date' %></td>
                    <td><%= task.assignedToName %></td>
                    <td><%= task.authorName %></td>
                    <td>
                        <a href="/tasks/manage/<%= task.id %>" class="btn btn-info btn-sm">Manage</a>
                        <a href="/tasks/delete/<%= task.id %>" class="btn btn-danger btn-sm">Delete</a>
                    </td>
                </tr>
            <% }); %>
        </tbody>
    </table>
</div>
<%- include('partials/footer') %>
